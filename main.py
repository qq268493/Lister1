token = "6924145075:AAGqMlHBm3CmegXs3_BvHsTMXGK6uDuLdyM"
ownerID = int("1961752558")

import asyncio,requests
from pyromod import listen
from pyrogram import Client, filters, idle
from pyrogram.types import InlineKeyboardMarkup, InlineKeyboardButton, BotCommand
from kvsqlite.sync import Client as DB
from datetime import date
from pyrogram.errors import FloodWait 
botdb = DB('bottdgb.sqlite')

bot = Client(
  'bot'+token.split(":")[0],
  9398500, 
 'ad2977d673006bed6e5007d953301e13',
  bot_token=token, in_memory=True
)
app = Client(
  'bkakot',
  9398500, 
 'ad2977d673006bed6e5007d953301e13',
  bot_token=token, in_memory=True
)
headers = {
    'sec-ch-ua': '"Chromium";v="105", "Not)A;Brand";v="8"',
    'Accept': 'application/json, text/plain, */*',
    'Referer': 'https://www.clashofstats.com/',
    'DNT': '1',
    'sec-ch-ua-mobile': '?1',
    'User-Agent': 'Mozilla/5.0 (Linux; Android 12; M2004J19C) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Mobile Safari/537.36',
    'sec-ch-ua-platform': '"Android"',
}

async def Clash(idd):
    params = {
        'q': idd,
        'page': '0',
        'nameEquality': 'false',
    }
    response = requests.get('https://api.clashofstats.com/search/players', params=params, headers=headers).json()
    print(response)
    name = response['items'][0]['name']
    id = response['items'][0]['tag']
    expLevel = response['items'][0]['expLevel']
    clanName = response['items'][0]['clanName']
    town = response['items'][0]['townHallLevel']
    war = response['items'][0]['warStars']
    
    text = f"*Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ : {name} \nÙ‡Ø§Ø´ØªØ§Ùƒ Ø§Ù„Ø­Ø³Ø§Ø¨ : {id} .\nØ§Ø³Ù… Ø§Ù„ÙƒÙ„Ø§Ù† : {clanName} \nÙ…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±Ø© Ù„Ù„Ø­Ø³Ø§Ø¨: {expLevel} \nÙ…Ø³ØªÙˆÙ‰ Ù‚Ø§Ø¹Ø© Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: {town} \nÙ†Ø¬ÙˆÙ… Ø§Ù„Ø­Ø±Ø¨ Ù„Ù„Ø­Ø³Ø§Ø¨ : {war} *"
    
    return text
async def english(idd):
    params = {
        'q': idd,
        'page': '0',
        'nameEquality': 'false',
    }
    response = requests.get('https://api.clashofstats.com/search/players', params=params, headers=headers).json()
    print(response)
    name = response['items'][0]['name']
    id = response['items'][0]['tag']
    expLevel = response['items'][0]['expLevel']
    clanName = response['items'][0]['clanName']
    town = response['items'][0]['townHallLevel']
    war = response['items'][0]['warStars']
    
    text = f"""**
Name : {name}
Hash : {id}
ClanName : {clanName}
ExpLevel: {expLevel}
TwonHall: {town}
starts war: {war} **"""
    return text
async def clans(hash):
	req = requests.get(f'https://api.clashofstats.com/clans/{hash}').json()
	print(req)
	tag = req['tag']
	name = req['name']
	description = req['description']
	level = req['clanLevel']
	winst = req['warWinStreak']
	win = req['warWins']
	mem = req['members']
	try:
		lost = req['warLosses']
		text = f"""**
	Name clan : {name}
	Hash clan : {tag}
	Level clan : {level}
	Member clan :{mem}
	description :{description}
	warWinStreak : {winst}
	Win war:{win}
	warLosses : {lost}
	**"""
	except KeyError:
		text = f"""**
	Name clan : {name}
	Hash clan : {tag}
	Level clan : {level}
	Member clan  :{mem}
	description :{description}
	warWinStreak : {winst}
	Win war:{win}
	**"""
	return text
async def ns(hash):
	req = requests.get(f'https://api.clashofstats.com/clans/{hash}').json()
	print(req)
	tag = req['tag']
	name = req['name']
	description = req['description']
	level = req['clanLevel']
	winst = req['warWinStreak']
	win = req['warWins']
	mem = req['members']
	try:
		lost = req['warLosses']
		text = f"""**
	Ø§Ø³Ù… Ø§Ù„ÙƒÙ„Ø§Ù† : {name}
	Ù‡Ø§Ø´ØªØ§Ùƒ : {tag}
	Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙƒÙ„Ø§Ù† : {level}
	Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ :{mem}
	ÙˆØµÙ Ø§Ù„ÙƒÙ„Ø§Ù† :{description}
	Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© ØªÙ… ÙÙˆØ² Ø¨Ù‡Ø§:{winst} 
	Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„ØªÙŠ ØªÙ… ÙÙˆØ² Ø¨Ù‡Ø§:{win}
	Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„ÙŠ Ø®Ø³Ø±Ù‡Ø§ : {lost}
	**"""
	except KeyError:
		text = f"""**
		Ø§Ø³Ù… Ø§Ù„ÙƒÙ„Ø§Ù† : {name}
	Ù‡Ø§Ø´ØªØ§Ùƒ : {tag}
	Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ÙƒÙ„Ø§Ù† : {level}
	Ø¹Ø¯Ø¯ Ø§Ù„Ø§Ø¹Ø¶Ø§Ø¡ :{mem}
	ÙˆØµÙ Ø§Ù„ÙƒÙ„Ø§Ù† :{description}
	Ø³Ù„Ø³Ù„Ø© Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„Ù…ØªØªØ§Ù„ÙŠØ© ØªÙ… ÙÙˆØ² Ø¨Ù‡Ø§:{winst} 
	Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆØ¨ Ø§Ù„ØªÙŠ ØªÙ… ÙÙˆØ² Ø¨Ù‡Ø§:{win}
	**"""
	return text
STARTKEY = InlineKeyboardMarkup(
       [
         [
           InlineKeyboardButton("â‰ˆ Ø¥Ø°Ø§Ø¹Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† â‰ˆ", callback_data="broadcast")
         ],
         [
           InlineKeyboardButton("â‰ˆ Ø§Ù„Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª â‰ˆ", callback_data="stats"),
           InlineKeyboardButton("â‰ˆ Ø§Ù„Ø£Ø¯Ù…Ù†ÙŠØ© â‰ˆ", callback_data="adminstats"),
           InlineKeyboardButton("â‰ˆ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ† â‰ˆ", callback_data="bannedstats"),
         ],
         [
           InlineKeyboardButton("â‰ˆ ÙƒØ´Ù Ù…Ø³ØªØ®Ø¯Ù… â‰ˆ",callback_data="whois"),
           InlineKeyboardButton("â‰ˆ Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù… â‰ˆ",callback_data="ban"),
         ],
         [
           InlineKeyboardButton("â‰ˆ Ø§Ù„ØºØ§Ø¡ Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù… â‰ˆ",callback_data="unban"),
         ],
         [
           InlineKeyboardButton("â‰ˆ Ø±ÙØ¹ Ø§Ø¯Ù…Ù† â‰ˆ",callback_data="addadmin"),
           InlineKeyboardButton("â‰ˆ ØªÙ†Ø²ÙŠÙ„ Ø§Ø¯Ù…Ù† â‰ˆ",callback_data="remadmin"),
         ]
       ]
     )
Rep = InlineKeyboardMarkup(
       [
         [
           InlineKeyboardButton("Search in account", callback_data="Ha"),
           InlineKeyboardButton("Search in clans", callback_data="has"),
           ],
           [
           InlineKeyboardButton("Channel Bot",url = 'https://t.me/coc_Arab'),
           ],
           ]
          )
ST = InlineKeyboardMarkup(
       [
         [
           InlineKeyboardButton("Ø¨Ø­Ø« Ø¹Ù† Ø­Ø³Ø§Ø¨", callback_data="Hasht"),
           InlineKeyboardButton("Ø¨Ø­Ø« Ø¹Ù† ÙƒÙ„Ø§Ù†", callback_data="hashg"),
           ],
           [
           InlineKeyboardButton("Ù‚Ù†Ø§Ø© Ø§Ù„Ø¨ÙˆØª",url = 'https://t.me/coc_Arab'),
           ],
           ]
          )
Ne = InlineKeyboardMarkup(
       [
         [
           InlineKeyboardButton("Ø¹Ø±Ø¨ÙŠ", callback_data="Ar"),
           InlineKeyboardButton("English", callback_data="en"),
           ],
           ]
          )
if not botdb.get("db"+token.split(":")[0]):
   data = {
     "users":[],
     "admins":[],
     "banned":[],
   }
   botdb.set("db"+token.split(":")[0], data)

if not ownerID in botdb.get("db"+token.split(":")[0])["admins"]:
   data = botdb.get("db"+token.split(":")[0])
   data["admins"].append(ownerID)
   botdb.set("db"+token.split(":")[0], data)

@bot.on_message(filters.command("start") & filters.private)
async def on_start(c,m):
   getDB = botdb.get("db"+token.split(":")[0])
   if m.from_user.id in getDB["banned"]:
     return await m.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   if m.from_user.id == ownerID or m.from_user.id in getDB["admins"]:
     await m.reply(f"**â€¢ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ âŒ¯ {m.from_user.mention}\nâ€¢ Ø¥Ù„ÙŠÙƒ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø¯Ù…Ù†**",reply_markup=STARTKEY,quote=True)
   if not m.from_user.id in getDB["users"]:
      data = getDB
      data["users"].append(m.from_user.id)
      botdb.set("db"+token.split(":")[0], data)
      allm = len(getDB['users'])
      for admin in data["admins"]:
         text = f"â€“ New user stats the bot :"
         username = "@"+m.from_user.username if m.from_user.username else "None"
         text += f"\n\nğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
         text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {m.from_user.mention}"
         text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{m.from_user.id}`"
         text += f"\nğ–¡‹ ğƒğ€ğ“ğ„ âŒ¯  **{date.today()}**"
         text += f"\nğ–¡‹ğŒğ„ğŒğğ„ğ‘ ğ€ğ‹ğ‹ âŒ¯ {allm}"
         try: await c.send_message(admin, text, reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton (m.from_user.first_name,user_id=m.from_user.id)]]))
         except: pass
   data = {"name":m.from_user.first_name[:25], "username":m.from_user.username, "mention":m.from_user.mention(m.from_user.first_name[:25]),"id":m.from_user.id}
   botdb.set(f"USER:{m.from_user.id}",data)


@bot.on_message(filters.private & ~filters.service)
async def on_messages(c,m):       
   if botdb.get(f"broad:{m.from_user.id}") and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      text = "**â€” Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†**\n"
      reply = await m.reply(text,quote=True)
      count=0
      users=botdb.get("db"+token.split(":")[0])["users"]
      for user in users:
        try:
          await m.copy(user)
          count+=1
          await reply.edit(text+f"**â€” ØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ù‰ [ {count}/{len(users)} ] Ù…Ø³ØªØ®Ø¯Ù…**")
        except FloodWait as x:
          await asyncio.sleep(x.value)
        except Exception:
          pass
      return True
   
   if m.text and botdb.get(f"whois:{m.from_user.id}") and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      getUser=botdb.get(f"USER:{m.text[:15]}")
      if not getUser:
        return await m.reply("â€“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¢ÙŠØ¯ÙŠ",quote=True)
      else:
         name=getUser["name"]
         id=getUser["id"]
         mention=getUser["mention"]
         username="@"+getUser["username"] if getUser["username"] else "None"
         language=botdb.get(f"LANG:{id}")
         text = f"ğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
         text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {name}"
         text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{id}`"
         text += f"\nğ–¡‹ ğ‘³ğ€ğğ† âŒ¯  {language}"
         text += f"\nğ–¡‹ ğ€ğ‚ğ‚ ğ‘³ğˆğğŠ âŒ¯  **{mention}**"
         return await m.reply(text,quote=True)
   
   if m.text and botdb.get(f"ban:{m.from_user.id}") and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      getUser=botdb.get(f"USER:{m.text[:15]}")
      if not getUser:
        return await m.reply("â€“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¢ÙŠØ¯ÙŠ",quote=True)
      else:
        if getUser["id"] in botdb.get("db"+token.split(":")[0])["admins"]:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø¸Ø± âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ø§Ø¯Ù…Ù†",quote=True)
        else:
          if getUser["id"] in botdb.get("db"+token.split(":")[0])["banned"]:
            return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø¸Ø± âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ù…Ø­Ø¸ÙˆØ± Ù…Ø³Ø¨Ù‚Ø§Ù‹",quote=True)
          name=getUser["mention"]
          id=getUser["id"]
          username="@"+getUser["username"] if getUser["username"] else "None"
          language=botdb.get(f"LANG:{id}")
          text = f"- This user added to blacklist:\n\n"
          text += f"ğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
          text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {name}"
          text += f"\nğ–¡‹ ğ‘³ğ€ğğ† âŒ¯  {language}"
          text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{id}`"
          data = botdb.get("db"+token.split(":")[0])
          data["banned"].append(id)
          botdb.set("db"+token.split(":")[0],data)
          return await m.reply(text,quote=True)
   
   if m.text and botdb.get(f"unban:{m.from_user.id}") and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      getUser=botdb.get(f"USER:{m.text[:15]}")
      if not getUser:
        return await m.reply("â€“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¢ÙŠØ¯ÙŠ",quote=True)
      else:
        if getUser["id"] in botdb.get("db"+token.split(":")[0])["admins"]:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØºØ§Ø¡ Ø­Ø¸Ø± âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ø§Ø¯Ù…Ù†",quote=True)
        else:
          if not getUser["id"] in botdb.get("db"+token.split(":")[0])["banned"]:
            return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØºØ§Ø¡ Ø­Ø¸Ø± âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ ØºÙŠØ± Ù…Ø­Ø¸ÙˆØ± Ù…Ø³Ø¨Ù‚Ø§Ù‹",quote=True)
          name=getUser["mention"]
          id=getUser["id"]
          username="@"+getUser["username"] if getUser["username"] else "None"
          language=botdb.get(f"LANG:{id}")
          text = f"- This user deleted from blacklist:\n\n"
          text += f"ğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
          text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {name}"
          text += f"\nğ–¡‹ ğ‘³ğ€ğğ† âŒ¯  {language}"
          text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{id}`"
          data = botdb.get("db"+token.split(":")[0])
          data["banned"].remove(id)
          botdb.set("db"+token.split(":")[0],data)
          return await m.reply(text,quote=True)
   
   if m.text and botdb.get(f"add:{m.from_user.id}") and m.from_user.id == ownerID:
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      getUser=botdb.get(f"USER:{m.text[:15]}")
      if not getUser:
        return await m.reply("â€“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¢ÙŠØ¯ÙŠ",quote=True)
      else:
        if getUser["id"] in botdb.get("db"+token.split(":")[0])["admins"]:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ø§Ø¯Ù…Ù† Ù…Ø³Ø¨Ù‚Ø§Ù‹",quote=True)
        if getUser["id"] in botdb.get("db"+token.split(":")[0])["banned"]:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø±ÙØ¹ âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ù…Ø­Ø¸ÙˆØ±",quote=True)
        else:          
          name=getUser["mention"]
          id=getUser["id"]
          username="@"+getUser["username"] if getUser["username"] else "None"
          language=botdb.get(f"LANG:{id}")
          text = f"- This user added to admins list:\n\n"
          text += f"ğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
          text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {name}"
          text += f"\nğ–¡‹ ğ‘³ğ€ğğ† âŒ¯  {language}"
          text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{id}`"
          data = botdb.get("db"+token.split(":")[0])
          data["admins"].append(id)
          botdb.set("db"+token.split(":")[0],data)
          return await m.reply(text,quote=True)
   
   if m.text and botdb.get(f"rem:{m.from_user.id}") and m.from_user.id == ownerID:
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      getUser=botdb.get(f"USER:{m.text[:15]}")
      if not getUser:
        return await m.reply("â€“ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¢ÙŠØ¯ÙŠ",quote=True)
      else:
        if not getUser["id"] in botdb.get("db"+token.split(":")[0])["admins"]:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ù…Ùˆ Ø§Ø¯Ù…Ù†",quote=True)
        if getUser["id"] == ownerID:
          return await m.reply(f"â€“ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ†Ø²ÙŠÙ„ âŒ¯ {getUser['mention']} âŒ¯ Ù„Ø£Ù†Ù‡ Ù…Ø§Ù„Ùƒ Ø§Ù„Ø¨ÙˆØª",quote=True)
        else:
          name=getUser["mention"]
          id=getUser["id"]
          username="@"+getUser["username"] if getUser["username"] else "None"
          language=botdb.get(f"LANG:{id}")
          text = f"- This user deleted from admins list:\n\n"
          text += f"ğ–¡‹ ğ”ğ’ğ„ âŒ¯  {username}"
          text += f"\nğ–¡‹ ğğ€ğŒğ„ âŒ¯  {name}"
          text += f"\nğ–¡‹ ğ‘³ğ€ğğ† âŒ¯  {language}"
          text += f"\nğ–¡‹ ğˆğƒ âŒ¯  `{id}`"
          data = botdb.get("db"+token.split(":")[0])
          data["admins"].remove(id)
          botdb.set("db"+token.split(":")[0],data)
          return await m.reply(text,quote=True)

@bot.on_callback_query()
async def on_Callback(c,m):      
   if m.data == "broadcast" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      await m.edit_message_text("â€¢ Ø£Ø±Ø³Ù„ Ø§Ù„Ø¥Ø°Ø§Ø¹Ø© Ø§Ù„Ø¢Ù† ( ØµÙˆØ±Ø© ØŒ Ù†Øµ ØŒ Ù…Ù„ØµÙ‚ ØŒ Ù…Ù„Ù ØŒ ØµÙˆØª )\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"broad:{m.from_user.id}",True)
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      
   if m.data == "whois" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      await m.edit_message_text("â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù„ÙƒØ´Ù Ø¹Ù†Ù‡\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"whois:{m.from_user.id}",True)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      
   if m.data == "ban" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      await m.edit_message_text("â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø­Ø¸Ø±Ù‡\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"ban:{m.from_user.id}",True)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
   
   if m.data == "unban" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      await m.edit_message_text("â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø±ÙØ¹ Ø­Ø¸Ø±Ù‡\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"unban:{m.from_user.id}",True)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
   
   if m.data == "addadmin" and m.from_user.id == ownerID:
      await m.edit_message_text("â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø±ÙØ¹Ù‡ Ø§Ø¯Ù…Ù†\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"add:{m.from_user.id}",True)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
   
   if m.data == "remadmin" and m.from_user.id == ownerID:
      await m.edit_message_text("â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ø±ÙØ¹Ù‡ Ø§Ø¯Ù…Ù†\nâ€¢ Ù„Ù„Ø¥Ù„ØºØ§Ø¡ Ø§Ø±Ø³Ù„ Ø§Ù„ØºØ§Ø¡ ",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="back")]]))
      botdb.set(f"rem:{m.from_user.id}",True)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")

   if m.data == "back" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      #await m.answer("â€¢ ØªÙ… Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ§Ù„ØºØ§Ø¡ ÙƒÙ„ Ø´ÙŠ ",show_alert=True)
      await m.edit_message_text(f"**â€¢ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ âŒ¯ {m.from_user.mention}\nâ€¢ Ø¥Ù„ÙŠÙƒ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø§Ø¯Ù…Ù†**",reply_markup=STARTKEY)
      botdb.delete(f"broad:{m.from_user.id}")
      botdb.delete(f"whois:{m.from_user.id}")
      botdb.delete(f"ban:{m.from_user.id}")
      botdb.delete(f"add:{m.from_user.id}")
      botdb.delete(f"rem:{m.from_user.id}")
      botdb.delete(f"unban:{m.from_user.id}")
      
   if m.data == "stats" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      users = len(botdb.get("db"+token.split(":")[0])["users"])
      await m.answer(f"â€¢ Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØª âŒ¯ {users}", show_alert=True,cache_time=10)
      
   if m.data == "adminstats" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      admins = len(botdb.get("db"+token.split(":")[0])["admins"])
      await m.answer(f"â€¢ Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø§Ø¯Ù…Ù†ÙŠØ© âŒ¯ {admins}\nâ€¢ Ø³ÙŠØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ Ø¢Ø¯Ù…Ù†", show_alert=True,cache_time=60)
      text = "- Ø§Ù„Ø§Ø¯Ù…Ù†ÙŠØ©:\n\n"
      count = 1
      for admin in botdb.get("db"+token.split(":")[0])["admins"]:
         if count==101: break
         getUser = botdb.get(f"USER:{admin}")
         mention=getUser["mention"]
         id=getUser["id"]
         text += f"{count}) {mention} ~ (`{id}`)\n"
         count+=1
      text+="\n\nâ€”"
      await m.message.reply(text,quote=True)
   
   if m.data == "bannedstats" and (m.from_user.id == ownerID or m.from_user.id in botdb.get("db"+token.split(":")[0])["admins"]):
      bans = botdb.get("db"+token.split(":")[0])["banned"]
      if not bans:  return await m.answer("â€¢ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†", show_alert=True,cache_time=60)
      await m.answer(f"â€¢ Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ† âŒ¯ {len(bans)}\nâ€¢ Ø³ÙŠØªÙ… Ø§Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ„ Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†", show_alert=True,cache_time=60)
      text = "- Ø§Ù„Ù…Ø­Ø¸ÙˆØ±ÙŠÙ†:\n\n"
      count = 1
      for banned in bans:
         if count==101: break
         getUser = botdb.get(f"USER:{banned}")
         mention=getUser["mention"]
         id=getUser["id"]
         text += f"{count}) {mention} ~ (`{id}`)\n"
         count+=1
      text+="\n\nâ€”"
      await m.message.reply(text,quote=True)
   if m.data == 'hashg':
   	getDB = botdb.get("db"+token.split(":")[0])
   	if m.from_user.id in getDB["banned"]:
   		return await m.message.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   	else:
	   	assk = await c.ask(m.message.chat.id,"â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„ÙƒÙ„Ø§Ù† Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ø¶Ù‡Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
	   	try:
		   	idd = assk.text.replace('#','')
		   	cla = await ns(idd)
		   	await m.message.reply(cla,quote=True,reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
	   	except:
	   		await m.message.reply('Ø§Ù„Ø§ÙŠØ¯ÙŠ Ø®Ø·Ø§ Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ù‡',reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
   if m.data == 'Hasht':
   	getDB = botdb.get("db"+token.split(":")[0])
   	if m.from_user.id in getDB["banned"]:
   		return await m.message.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   	else:
   		assk = await c.ask(m.message.chat.id,"â€¢ Ø§Ø±Ø³Ù„ Ø§Ù„Ø¢Ù† Ø§ÙŠØ¯ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ø¶Ù‡Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
	   	try:
	   		idgd = assk.text.replace('#','')
		   	cla = await Clash(idgd)
		   	await m.message.reply(cla,quote=True,reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
	   	except:
	   		await m.message.reply('Ø§Ù„Ø§ÙŠØ¯ÙŠ Ø®Ø·Ø§ Ø§Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ù‡',quote=True,reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
   if m.data == 'baack':
   	await m.edit_message_text(f"**â€¢ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ âŒ¯ {m.from_user.mention}\nâ€¢ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø§Ù†Ù„Ø§ÙŠÙ† Ø§Ù„Ø°ÙŠ ØªØ­Øª**",reply_markup=ST)
   if m.data == 'Ar':
   	await m.edit_message_text(f"**â€¢ Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ âŒ¯ {m.from_user.mention}\nâ€¢ Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø§Ù†Ù„Ø§ÙŠÙ† Ø§Ù„Ø°ÙŠ ØªØ­Øª**",reply_markup=ST)
   if m.data == 'en':
   	await m.edit_message_text(f"**â€¢ Welcome âŒ¯ {m.from_user.mention}\nâ€¢ Choose from the button below**",reply_markup=Rep)
   if m.data == 'bacck':
   	await m.edit_message_text(f"**â€¢ Welcome âŒ¯ {m.from_user.mention}\nâ€¢ Choose from the button below**",reply_markup=Rep)
   if m.data == 'has':
   	getDB = botdb.get("db"+token.split(":")[0])
   	if m.from_user.id in getDB["banned"]:
   		return await m.message.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   	else:
   		assk = await c.ask(m.message.chat.id,"â€¢ Send the hashtag of the clan you want to search for",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="bacck")]]))
   		try:
	   		idgd = assk.text.replace('#','')
		   	cla = await clans(idgd)
		   	await m.message.reply(cla,quote=True,reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="baack")]]))
   		except:
	   		await m.message.reply('Wrong id, try again',reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="bacck")]]))
   if m.data == 'Ha':
   	getDB = botdb.get("db"+token.split(":")[0])
   	if m.from_user.id in getDB["banned"]:
   		return await m.message.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   	else:
   		assk = await c.ask(m.message.chat.id,"â€¢ Send the hashtag of the account you want to search for",reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="bacck")]]))
   		try:
		   	idd = assk.text.replace('#','')
		   	cla = await english(idd)
		   	await m.message.reply(cla,quote=True,reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Back",callback_data="bacck")]]))
   		except:
	   		await m.message.reply('Wrong id, try again',reply_markup=InlineKeyboardMarkup ([[InlineKeyboardButton ("Ø±Ø¬ÙˆØ¹",callback_data="bacck")]]))
@app.on_message(filters.command("start") & filters.private)
async def start_msg(app,message):
   getDB = botdb.get("db"+token.split(":")[0])
   if message.from_user.id in getDB["banned"]:
     return await message.reply("ğŸš« ØªÙ… Ø­Ø¸Ø±Ùƒ Ù…Ù† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨ÙˆØª",quote=True)
   else:
   	await message.reply('**Welcome to the bot. Choose English if you are a foreigner\n\nÙ…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¨ÙˆØª Ø§Ø®ØªØ± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© **',reply_markup=Ne,quote=True)
bot.start()
app.start()
print("ur bot started successfully")
idle()